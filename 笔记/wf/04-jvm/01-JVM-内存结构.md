# JVM内存结构

![JVM内存结构](http://images2015.cnblogs.com/blog/331425/201606/331425-20160623115840235-1252768148.png "JVM内存结构")

*JVM内存结构主要由：**堆内存、方法区、栈**。*

* 堆内存是JVM中最大的一块由年轻代和老年代组成，而年轻代内存又被分成三部分，Eden空间、From Survivor空间、To Survivor空间,默认情况下年轻代按照8:1:1的比例来分配
* 方法区存储类信息、常量、静态变量等数据，是线程共享的。
* 栈分为：java虚拟机栈和本地方法栈，主要用于方法的执行。**本地方法栈为虚拟机执行本地方法提供服务。**

![JVM和系统调用](http://images2015.cnblogs.com/blog/331425/201606/331425-20160623115846235-947282498.png "JVM和系统调用")

**方法区和堆是所以线程共享的，而java栈、本地方法栈和程序计数器是线程私有的。**

### 详细介绍
#### Java堆(Heap)
*存放对象实例，所以的对象实例都在堆中分配内存。所有线程共享。如果在堆中没有内存完成实例分配，并且堆也无法再扩展时，将会抛出OutOfMemoryError异常。*

#### 方法区(Method Area)
*存储被JVM加载的类信息、常量、静态变量等。所有线程共享。当方法区无法满足内存分配需求时，将抛出OutOfMemoryError异常。*

#### 程序计数器
*当前线程所执行的字节码的行号指示器。**字节码解释器通过改变计数器的值来选取下一个需要执行的字节码指令，分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。** 程序计数器是线程私有的。*

#### JVM栈（JVM Stacks）
*线程私有的，生命周期与线程相同。**JVM栈描述的是Java方法执行的内存模型：每个方法被执行的时候都会同时创建一个栈帧(Stack Frame)用于存储局部变量表、操作栈、动态链接、方法出口等信息。每个方法被调用直至执行完毕的过程，对应着一个栈帧在JVM栈中从入栈到出栈的过程。** 局部变量表存放了编译期可知的各种基本数据类型（boolean、byte、char、short、int、float、long、double）、对象引用*

#### 本地方法栈（Native Method Stacks）
*本地方法栈（Native Method Stacks）与虚拟机栈所发挥的作用是非常相似的，其区别不过是虚拟机栈为虚拟机执行Java方法（也就是字节码）服务，**而本地方法栈则是为虚拟机使用到的Native方法服务。***